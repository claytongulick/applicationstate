!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r={get:function(e){return e=r._dereferencePath(e),r._resolvePath(e)},getOrSet:function(e,t,n){const i=r.get(e);return void 0!==i?i:(r.set(e,t,n),r.get(e))},listen:function(e,t){return r._listeners[e]||(r._listeners[e]=[]),r._listenerKey++,t._listenerKey=r._listenerKey,r._listeners[e].push(t),t._listenerKey},removeListener:function(e,t){if(r._listeners[e])for(let n=0;n<r._listeners[e].length;n++)r._listeners[e][n]._listenerKey==t&&r._listeners[e].splice(n,1)},set:function(e,t,n){e=r._dereferencePath(e);if(n=Object.assign({notify:!0,exclude_notification_paths:[],exclude_notification_listeners:[],immutable:!1,persist:!0,save_previous:!0},n),r._options[e]=n,!r._previousState[e]&&n.save_previous&&(r._previousState[e]=[]),n.save_previous){let t=r._resolvePath(e);void 0!==t&&r._previousState[e].push(t)}r._assignValue(e,t),r.notify(e,!1,n)},_assignValue:function(e,t,n){n=n||r._state;const i=r.walk(e);for(let e=0;e<i.length;e++){const r=i[e];switch(r.type){case"object":void 0===n[r.name]&&(n[r.name]={}),n=n[r.name];break;case"array":void 0===n[r.name]&&(n[r.name]=[]),n=n[r.name];break;case"leaf":return n[r.name]=t}}throw Error("We should have returned after setting the value.")},ln:function(e,t){r._symlinks||(r._symlinks={}),r._reverse_symlinks||(r._reverse_symlinks={}),e=r._dereferencePath(e);let n=t.split("."),i=n.slice(-1);t=r._dereferencePath(n.slice(0,-1).join("."))+"."+i,r._symlinks[t]=e,r._reverse_symlinks[e]||(r._reverse_symlinks[e]=[]),r._reverse_symlinks[e].push(t)},rm:function(e,t){t=t||r._state;let n=e;if("app"===e)return;if(!e)return;function i(e,t){let n=r._symlinks[e];if(delete r._symlinks[e],!t){let t=r._reverse_symlinks[n];t.splice(t.indexOf(e),1)}}if(function(e){return!(!r._symlinks||!r._symlinks[e])}(e=r._materializePath(e)))return i(e);if(function(e){return!(!r._reverse_symlinks||!r._reverse_symlinks[e])}(e)){for(let t=0;t<r._reverse_symlinks[e].length;t++)i(e,!0);delete r._reverse_symlinks[e]}let s=r.walk(e),o=s.slice(-1)[0];s=s.slice(0,-1);for(let n=0;n<s.length;n++)if(void 0===(t=t[s[n].name]))throw new Error("Undefined target in ApplicationState.rm: "+e);"array"===o.parent_type?t.splice(o.name,1):delete t[o.name];let l=r._options[n];l||(l={notify:!0,exclude_notification_paths:[],exclude_notification_listeners:[],immutable:!1,persist:!0,save_previous:!0}),r.notify(n,!1,l)},_dereferencePath:function(e){if(!r._symlinks)return e;const t=r.walk(e);for(let n=0;n<t.length;n++){const i=t[n];if(r._symlinks[i.path])return e=e.replace(i.path,r._symlinks[i.path]),r._dereferencePath(e)}return e},_reverseSymlink:function(e){if(e.indexOf(".")<0)return[];let t=[],n=[];function i(e){let t=e.split("."),i=t.slice(-1),s=t.slice(0,-1).join("."),o=r._reverseSymlink(s);for(let e=0;e<o.length;e++)n.push(o[e]+"."+i)}r._reverse_symlinks[e]&&(t=r._reverse_symlinks[e]);for(let e=0;e<t.length;e++)i(t[e]);return i(e),t.concat(n)},_materializePath:function(e){let t=e.split("."),n=t.slice(-1);return r._dereferencePath(t.slice(0,-1).join("."))+"."+n},_resolvePath:function(e,t){if("string"!=typeof e)throw Error("is");t=t||r._state;const n=r.walk(e);for(let e=0;e<n.length;e++){if(void 0===(t=t[n[e].name]))return;if(null===t)return null}return t},notify:function(e,t,n){function i(e,t,i){if(!(n.exclude_notification_listeners.indexOf(e._listenerKey)>=0)){if(t=r._dereferencePath(t),r._previousState[t])return e(r._resolvePath(t),r._previousState[t][r._previousState[t].length-1],i);e(r._resolvePath(t),void 0,i)}}function s(e){if(!r._symlinks)return;let t=r._reverseSymlink(e);for(let e=0;e<t.length;e++){const s=t[e];if(!r._listeners[s])return;if(n.exclude_notification_paths.indexOf(s)>=0)return;const o=r._listeners[s];for(let e=0;e<o.lenth;e++)i(o[e],s)}}r._disable_notification||(t||function(e){const t=r.walk(e);for(let o=0;o<t.length;o++){const l=t[o];if("leaf"!==l.type&&(s(l.path),!(n.exclude_notification_paths.indexOf(l.path)>=0)&&r._listeners[l.path])){const t=r._listeners[l.path];for(let n=0;n<t.length;n++)i(t[n],l.path,e)}}}(e),function(e){if(s(e),!r._listeners[e])return;if(n.exclude_notification_paths.indexOf(e)>=0)return;const t=r._listeners[e];for(let n=0;n<t.length;n++)i(t[n],e)}(e),t||function e(t){const o=r._resolvePath(t);if(o&&"object"==typeof o)if(Array.isArray(o)){const l=o.length;for(let o=0;o<l;o++){const l=t+"["+o+"]";if(s(l),n.exclude_notification_paths.indexOf(l)>=0)return e(l);if(r._listeners[l]){const e=r._listeners[l];for(let n=0;n<e.length;n++)i(e[n],l,t)}e(l)}}else{const l=Object.keys(o);for(let o=0;o<l.length;o++){const a=t+"."+l[o];if(s(a),n.exclude_notification_paths.indexOf(a)>=0)return e(a);if(r._listeners[a]){const e=r._listeners[a];for(let n=0;n<e.length;n++)i(e[n],a,t)}e(a)}}}(e))},undo:function(e){if(e.indexOf(".")<0)return r._previousState[e]?void(r._state[e]=r._previousState[e].pop()):r._state[e]=void 0;var t=e.split(".");for(let n=t.length;n>0;n--)if(e=t.slice(0,n).join("."),r._state[e]){if(!r._previousState[e])return r._state[e]=void 0;r._state[e]=r._previousState[e].pop()}},disable_notfication:function(){r._disable_notification=!0},enable_notification:function(){r._disable_notification=!1},flatten:function(e,t,n){n||(n=[]),t||(t="");let r=Object.keys(e),i=Array.isArray(e);for(let s=0;s<r.length;s++){let o,l=e[r[s]];o=i?t+(t?"["+r[s]+"]":""):t+(t?".":"")+r[s],l&&"object"==typeof l?this.flatten(l,o,n):((l=JSON.stringify(l))||(l=JSON.stringify(null)),n.push({key:o,value:l}))}return n},walk:function(e){let t,n,r,i,s,o,l=0;const a=[];if("["===e[0])throw Error("Root node cannot be an array");const f=function(e,t,n){let r;return t?r="array"===n?t.replace("["+e+"]",""):t.replace("."+e,""):""};for(t=0;t<e.length;t++)if(l!==t)if("."!==e[l]&&"["!==e[l]&&"]"!==e[l]||l++,"."!==e[t])if("["!==e[t]){if("]"===e[t]){if(n=e.substring(l,t),r=e.substring(0,t+1),t+1===e.length)return a.push({name:parseInt(n),path:r,parent:s,parent_path:f(n,r,o),parent_type:o,type:"leaf"}),s=n,a;i="["===e[t+1]?"array":"object",a.push({name:parseInt(n),path:r,parent:s,parent_path:f(n,r,o),parent_type:o,type:i}),s=n,o=i,l=t+1}}else n=e.substring(l,t),r=e.substring(0,t),l=t+1,i="array",a.push({name:n,path:r,parent:s,parent_path:f(n,r,o),parent_type:o,type:i}),s=n,o=i;else n=e.substring(l,t),r=e.substring(0,t),l=t+1,i="object",a.push({name:n,path:r,parent:s,parent_path:f(n,r,o),parent_type:o,type:i}),s=n,o=i;return l===t+1?a:(a.push({name:e.substring(l),path:e,parent:s,parent_path:f(e,r,o),parent_type:o,type:"leaf"}),a)},_previousState:{},_state:{},_listeners:[],_listenerKey:0,_options:{}};t.default=r}]);